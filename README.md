## 프로젝트 개요
E-커머스 서비스로서 아래의 API를 제공합니다.
- 잔액 충전/조회 API
- 상품 조회 API
- 주문/결제 API
- 선착순 쿠폰 API
- 인기 판매 상품 API

</br>

## 요구사항 정리
### 기능적 요구사항

| 도메인 | 기능명         | 설명                                                                                                                |
|----|-------------|-------------------------------------------------------------------------------------------------------------------|
| 유저 | 포인트 조회      | 유저는 자신이 보유한 포인트를 조회할 수 있습니다                                                                                       |
| 유저 | 포인트 충전      | 유저는 상품 구매를 위한 포인트를 충전할 수 있습니다                                                                                     |
| 유저 | 포인트 사용      | 유저는 포인트를 사용하여 상품을 결제할 수 있습니다                                                                                      |
| 상품 | 상품 조회       | 특정 상품을 조회하여 이름, 가격, 수량을 확인할 수 있습니다                                                                                |
| 상품 | 전체 상품 조회    | 모든 상품을 조회하여 이름, 가격, 수량을 확인할 수 있습니다                                                                                |
| 상품 | 인기 판매 상품 조회 | 현재 일을 기준으로 최근 3일간 가장 많이 판매된 상품 N개를 조회할 수 있습니다                                                                     |
| 주문 | 상품 주문       | 유저는 아직 재고가 남아있는 상품을 주문할 수 있습니다                                                                                    |
| 주문 | 주문 조회       | 유저는 단건의 주문 내용을 조회하여 주문한 상품의 이름, 가격, 주문 수량과 주문 상태를 확인할 수 있습니다 <br/>주문 상태 종류 : [주문취소, 결제 전, 결제완료, 배송전, 배송중, 배송 완료] |
| 주문 | 전체 주문 조회    | 유저는 모든 주문의 내용을 조회하여 주문한 상품의 이름, 가격, 주문 수량과 주문 상태를 확인할 수 있습니다 <br/>주문 상태 종류 : [주문취소, 결제 전, 결제완료, 배송전, 배송중, 배송 완료]  |
| 주문 | 주문 취소       | 유저는 [결제 전, 결제 완료, 배송 전] 상태의 주문을 취소할 수 있습니다                                                                        |
| 결제 | 결제          | 유저는 취소되지 않은 주문을 포인트를 사용하여 결제를 요청할 수 있습니다                                                                          |
| 결제 | 결제 조회       | 유저는 주문의 결제 상태를 조회할 수 있습니다.. <br/>     결제 상태 종류: [결제 전, 결제 완료, 결제 취소]                                      |
| 쿠폰 | 쿠폰 조회       | 유저는 현재 자신이 사용할 수 있는 쿠폰을 조회할 수 있습니다 <br/>쿠폰 상태 종류: [발급됨, 사용됨]                                                      |
| 쿠폰 | 쿠폰 사용       | 유저는 쿠폰을 사용하여 할인된 금액으로 상품을 구매할 수 있습니다                                                                              |
| 쿠폰 | 선착순 쿠폰 발급   | 유저는 선착순으로 제공되는 쿠폰을 발급 받아 등록할 수 있습니다                                                                               |

### 비기능적 요구사항
* 선착순 쿠폰 발급로 인해 특정 시간대에 트래픽이 몰려 짧은 시간에 많은 요청이 들어오더라도 버틸수 있어야합니다.

</br>

## 아키텍처 설명
해당 프로젝트는 Clean Architecture를 사용하였습니다.
<br> Clean Architecture 기반으로 UseCase 설계와 DI를 적용하여 확장성 보장하는 방식으로 코드를 구현하였으며
<br> 각기 다른 도메인의 로직을 처리해야될 부분은 DomainService에서 처리를 하였습니다.
<br>
### 아키텍처 선택 이유
많은 사람들이 이미 널리 사용되고 있는 레이어드 아키텍처 대신 클린 아키텍처를 선택하는 이유에 대해 궁금증이 있었고,
UseCase를 하나의<br> 도메인 기능 단위로만 구성함으로써 SRP(단일 책임 원칙)를 철저히 준수하고,
외부 의존성을 최소화함으로써 애플리케이션의 범용성과 유지보수성을 크게 향상시킬 수 있다는 점에서
클린 아키텍처가 여러 측면에서 더 우수하다고 판단하였습니다.

## 계층 구조 및 특징
```
Controller -> UseCase -> DomainService(선택) -> Repositroy ->  RepositoryImpl(구현체)
```

### Controller
클라이언트로부터의 HTTP 요청을 받아 처리하는 계층입니다. 
<br> `@Valid`을 통해 requestDTO에서 검증을 진행하는 것이 특징입니다.

### UseCase
한가지 기능 또는 목적에 집중된 서비스(Application Service) 계층 입니다.
<br> 도메인 규칙을 사용하여 한가지 기능을 처리하는 계층이며 실질적인 비지니스 로직은 UseCase가 아니라 Domain 내부에서 처리됩니다.

### DomainService(선택)
여러 도메인 로직을 처리하는 도메인 계층입니다. 
<br> 앞서 언급드린대로 이름은 Service이지만 도메인 로직을 처리하는 로직입니다. 이번의 경우 쿠폰을 사용하는 유스케이스에서  <br> 
`쿠폰 사용 여부 확인`, `주문상세의 총금액 계산`, `쿠폰 상태 변경`을 하나의 도메인 서비스 로직으로 묶어서 처리하였습니다.

### Repositroy
도메인이 데이터 베이스 와 상호작용하기 위한 추상화된 계층입니다.
<br> 도메인이 데이터베이스 세부 구현에 의존하지 않도록 하여 결합도를 낮추고, 유연한 구조를 만듭니다.

### Repository(구현체)
RepositoryImpl은 Repository 인터페이스를 실제 데이터베이스 맞게 구현한 구체 클래스입니다.
<br> 인터페이스와 분리되어 있어 데이터 베이스 구현 및 변경 시 도메인이나 상위 계층에 영향을 최소화합니다.

</br>

## 패키지 구조

### 도메인 구조의 패키지 구조를 선택한 이유
계층 구조의 패키지 구조를 선택하게 될 경우 여러 UseCase들을 한번에 파악하기 쉽다는 장점도 있지만
<br> 반대로 내가 원하는 도메인의 UseCase들을 찾는데에는 어려움이 있을 것이라고 생각하였습니다.
<br> 그리고 추후 도메인 별로 계층 구조가 달라지거나 특정 도메인에 추가적인 외부 의존성이 추가가 될 경우
<br> 패키지 구조를 도메인 구조로 하는 편이 클린 아키텍처와 DDD가 지향하는 바에 더욱 적합하다고 생각이 되었습니다.




