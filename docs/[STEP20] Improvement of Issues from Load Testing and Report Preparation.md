## [STEP20] Improvement of Issues from Load Testing and Report Preparation
- **테스트를 진행하며 획득한 다양한 성능 지표를 분석 및 시스템 내의 병목을 탐색 및 개선함**
- **가상의 장애 대응 문서를 작성하고 제출함**

___

## 시스템 내의 병목을 탐색 및 개선

앞서 STEP19에서 캐싱(Redis) 사용 유무로 내용을 정리하였습니다.

[STEP 19 부하 테스트 스크립트 작성 관련 문서 작성](https://github.com/jissuk/hhplus_eCommerce_java/blob/step19/docs/%5BSTEP19%5D%20Load%20Testing%20Script%20Development%20and%20Execution.md)

---

## 장애 대응 문서

### 1. 장애 탐지 (Detection)
시스템에서 탐지한 이상 현상을 즉각적으로 인지하는 것이 중요하다.
- **탐지 방법**
    - 모니터링 시스템에서 알람 발생
    - 로그 분석
- **초기 확인 항목**
    - 장애 발생 시각 및 최초 탐지 경로
    - 장애 영향 범위
    - 주요 지표 확인(CPU, Memory, Network, TPS, 오류율 등)

---

### 2. 장애 전파 (Notification)
장애를 해결하는 것만큼 중요한 것이 장애 전파이다. 잘못된 정보를 전파하게 될 경우 큰 혼란이 올 수 있기에 조심해야한다.
- 담당자 및 관련 팀에게 즉시 알림
- 필요 시, 외부 관계자들에게도 장애 전파
  - 서비스 상태 페이지 업데이트
  - 고객센터/사용자 공지(현재 상태, 조치 예정 시간, 후속 대응 정보)

---

### 3. 장애 복구 (Recovery)
상황에 맞게 대응하되 원인 파악보다는 해결이 우선되어야한다.
- **장비 증설**
    - 트래픽이 과도하게 몰릴 대
    - 변경된 코드가 시스템에 부하를 가할 때
- **롤백**
    - 장애 발생 직전 시점에 변경된 내용으로 인해 장애가 발생할 경우
- **핫픽스**
  - 앞서 말한 롤백보다 핫픽스가 빠르다고 판단 시 핫픽스로 진행
- **장비교체**
  - 간혹 특정 장비에 문제가 생기거나 위의 조치로 해결되지 않을 때는 장비를 교체한다.

---

### 4. 원인 분석 (Root Cause Analysis)
- **분석 절차**
    - 장애 시점 전후 로그/모니터링 지표 확인
    - 최근 변경 사항(코드 배포, 설정 변경, 인프라 변경) 검토
    - 외부 요인(네트워크, 클라우드 서비스, DB 장애) 확인
- **분석 결과 정리**
    - 직접 원인
    - 근본 원인
    - 영향을 받은 범위 및 사용자 수
    - 복구에 소요된 시간

---

### 5. 재발 방지 (Prevention)
- **기술적 조치**
    - 모니터링 강화(지표 추가, 임계값 조정)
    - 성능 개선(쿼리 튜닝, 캐싱, 서버 확장)
- **운영적 조치**
    - 장애 대응 매뉴얼 보완
    - 포스트모템 작성 및 공유
- **추적 관리**
    - 장애 재발 여부 모니터링
    - 개선 사항의 이행 여부 주기적 점검


